<head>
    <style>
        .slider {
            border-radius: 25px;
            outline: none;
        }

        .slider::-moz-range-progress {
            border: rgb(140, 178, 211);
        }

        .audioDiv {
            display: inline-block;
        }

        .slider.audio:hover {
            opacity: 1;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            cursor: pointer;
            outline: none;
            border: none;
            background: rgb(45, 100, 148) !important;
            border-radius: 8px;
        }

        .audio.slider::-webkit-slider-thumb {
            width: 10px;
            height: 10px;
        }

        .time.slider::-webkit-slider-thumb {
            margin-top: -5px;
        }

        .slider::-webkit-slider-runnable-track {
            -webkit-appearance: none;
            background: transparent;
            height: 10px;
        }

        .audio.slider::-webkit-slider-runnable-track {
            height: 10px !important;
            width: 100%;
        }

        input[type=range] {
            width: 100%;
            background: rgba(140, 178, 211, 0.548) !important;
            background-image: linear-gradient(currentColor, currentColor) !important;
            background-repeat: no-repeat !important;
            background-size: 0% 100% !important;
            padding: 0px 0px !important;
        }

        .audioPlayerMain {
            width: 100%;
        }

        .audio.slider[type='range'] {
            -webkit-appearance: none;
            appearance: none;
            padding: 0px;
            margin: 0px;
            background-color: white;
            width: 100px;
            top: calc(50% - 12px);
            left: -19px;
            height: 4px;
            color: inherit;
        }

        .slider::-moz-range-thumb {
            width: var(--slider-size);
            height: var(--slider-size);
            background: currentColor;
            cursor: pointer;
            outline: none;
            border: none;
            border-radius: 30px;
        }

        .audio.slider::-moz-range-thumb {
            width: 4px;
            height: 4px;
        }

        .audio.slider::-moz-range-progress {
            height: 4px;
            border-radius: 30px;
        }

        .custom-video-player {
            user-select: none;
        }

        .videoPlayerMain {
            border-radius: 8px;
            width: 100%;
            height: auto;
        }

        .videoContainer {
            border-radius: 8px;
            position: relative;
        }

        .controlBar {
            height: 40px;
            line-height: 40px;
            vertical-align: middle;
            background: rgba(255, 255, 255);
            margin: 0px;
            position: relative;
            top: -5px;
            bottom: 0px;
            left: 0px;
            z-index: 1000;
        }

        .labelContainer {
            font-size: 16px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 600;
            vertical-align: middle;
            color: rgb(45, 100, 148);
        }

        .videoCoverIcon {
            position: absolute;
            margin-top: 7px;
            margin-left: 10px !important;
        }

        .fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
        }

        .videoInfo {
            height: 46px;
            line-height: 46px;
            width: 46px;
            background: rgba(231, 231, 231, 0.918);
            margin: 0px;
            position: absolute;
            left: 50%;
            bottom: 50%;
            z-index: 1000;
        }

        .buttonGroup {
            margin-left: 1rem;
            display: inline-block;
            width: auto;
            min-width: 50px !important;
        }

        .baseLabel {
            height: 36px;
            line-height: 36px;
            vertical-align: middle;
        }

        .groupActionButton {
            margin-left: 0.5rem;
            border: 0px;
            height: 28px;
            width: 28px;
            display: inline-block;
            vertical-align: middle;
            cursor: pointer;
        }

        .groupActionButton:hover {
            fill: rgba(76, 140, 182, 0.63);
        }

        .volumeButtonGroup {
            float: right;
            right: 0px;
        }

        .progress-bar-container {
            width: 100%;
            height: 100%;
            position: relative;
            cursor: pointer;
            margin: 0px;
            background: white;
        }

        .progress-bar {
            height: 100%;
            position: relative;
            border-radius: 4px;
            display: block;
            background: rgb(45, 100, 148);
            z-index: 1500;
        }

        .progress-bar-buffer {
            height: 100%;
            position: relative;
            border-radius: 4px;
            display: inline-block;
            background: darkgray;
            margin-left: 2px;
            z-index: 995;
        }

        .progress-knob {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            position: absolute;
            top: -1px;
            z-index: 999;
            background: rgb(45, 100, 148);
            transform: translateX(-50%);
        }

        .slider-container {
            display: inline-block;
            align-items: center;
            line-height: 6px;
            color: rgb(45, 100, 148);
            vertical-align: middle;
        }

        .slider {
            width: 125px;
            cursor: pointer;
            height: 25px;
            top: -25px !important;
            z-index: 996;
        }
    </style>
</head>

<body>
    <div class="custom-video-player" style="width: 100%;">
        <div id="videoContainer" class="videoContainer">
            <video class="videoPlayerMain" id="videoPlayer">
                <source src="../splitter/src/assets/nexus.mp4" type="video/mp4" id="videoP">
                Your browser does not support the video tag.
            </video>

            <div class="videoInfo" id="coverPlayPause">
                <svg id="coverPlayIcon" class="groupActionButton videoCoverIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <g id="Ebene_3" data-name="Ebene 3">
                        <polygon points="17.037 12 6.037 19 6.037 5 17.037 12" style="fill: rgb(45,100,148)" />
                    </g>
                    <rect x="-0.0614" width="24" height="24" style="fill:none" />
                </svg>

                <svg id="coverPauseIcon" class="groupActionButton videoCoverIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <g id="Ebene_2" data-name="Ebene 2">
                        <rect x="5.9386" y="5" width="4" height="14" style="fill: rgb(45,100,148)" />
                        <rect x="13.9386" y="5" width="4" height="14" style="fill: rgb(45,100,148)" />
                    </g>
                    <rect x="-0.0614" width="24" height="24" style="fill:none" />
                </svg>
            </div>

            <div class="controlBar">
                <div style="width: 100%; height: 6px;">
                    <div class="progress-bar-container" id="progressBar">
                        <div id="progessBarLine" class="progress-bar"></div>
                        <div id="progessBarKnob" class="progress-knob"></div>
                    </div>

                    <div id="progessBarBuffer" class="progress-bar-buffer"></div>
                </div>

                <div id="controlButtonBar">
                    <div class="buttonGroup">
                        <svg id="skipBackward" class="groupActionButton" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <rect x="6.9847" y="7" width="2" height="10" style="fill: rgb(45,100,148)" />
                            <polygon points="16.985 7 16.985 17 9.985 12 16.985 7" style="fill: rgb(45,100,148)" />
                            <rect width="24" height="24" style="fill:none" />
                        </svg>

                        <svg id="playIcon" class="groupActionButton" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <g>
                                <polygon points="17.037 12 6.037 19 6.037 5 17.037 12" style="fill:rgb(45,100,148)" />
                            </g>
                            <rect width="24" height="24" style="fill:none" />
                        </svg>

                        <svg id="pauseIcon" class="groupActionButton" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <g>
                                <rect x="5.9386" y="5" width="4" height="14" style="fill:rgb(45,100,148)" />
                                <rect x="13.9386" y="5" width="4" height="14" style="fill: rgb(45,100,148)" />
                            </g>
                            <rect x="-0.0614" width="24" height="24" style="fill:none" />
                        </svg>

                        <svg id="skipForward" class="groupActionButton" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <rect x="14.9686" y="6.9996" width="2" height="10" transform="translate(31.9371 23.9993) rotate(180)" style="fill:rgb(45,100,148)" />
                            <polygon points="6.969 17 6.969 7 13.969 12 6.969 17" style="fill:rgb(45,100,148)" />
                            <rect width="24" height="24" style="fill:none" />
                        </svg>
                    </div>

                    <div class="buttonGroup labelContainer">
                        <span id="currentTimeLabel" class="baseLabel"></span>
                        <span class="baseLabel" style="margin: 0 0.25rem">/</span>
                        <span id="wholeTimeLabel" class="baseLabel"></span>
                    </div>

                    <div class="volumeButtonGroup">
                        <svg id="soundIcon" class="groupActionButton" style="margin-right: 0.5rem;" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M0,0H24V24H0Z" style="fill:none" />
                            <path d="M18.5,12A4.5,4.5,0,0,0,16,7.97v8.05A4.474,4.474,0,0,0,18.5,12ZM5,9v6H9l5,5V4L9,9Z" style="fill: rgb(45,100,148)" />
                        </svg>

                        <svg id="muteIcon" class="groupActionButton" style="margin-right: 0.5rem;" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M0,0H24V24H0Z" style="fill:none" />
                            <path d="M18.5,12A4.5,4.5,0,0,0,16,7.97v8.05A4.474,4.474,0,0,0,18.5,12ZM5,9v6H9l5,5V4L9,9Z" style="fill: rgb(45,100,148)" />
                            <line x1="6" y1="6" x2="18" y2="18" style="stroke: rgb(45,100,148); stroke-width: 2px;" />
                        </svg>


                        <div class="audioDiv">
                            <input id="volumeSlider" type="range" min="0" max="100" value="0" class="audio slider">
                        </div>

                        <span id="muteVolumeLabel" class="baseLabel labelContainer" style="margin: 0 0.75rem"></span>

                        <svg id="volumeIcon" class="groupActionButton" xmlns="http://www.w3.org/2000/svg" style="rotate: 45deg;" viewBox="0 0 24 24">
                            <polyline points="5.5 5.5 18.5 5.5 18.5 18.5 5.5 18.5" style="fill:none" />
                            <g>
                                <path d="M9.0556,7.7778,12,4.8333l2.9444,2.9445,1.4112-1.4222L12,2,7.6444,6.3556Z" style="fill:rgb(45,100,148)" />
                                <path d="M14.9444,16.2222,12,19.1667,9.0556,16.2222,7.6444,17.6444,12,22l4.3556-4.3556Z" style="fill:rgb(45,100,148)" />
                                <path d="M16.2222,9.0556,19.1667,12l-2.9445,2.9444,1.4222,1.4112L22,12,17.6444,7.6444Z" style="fill:rgb(45,100,148)" />
                                <path d="M7.7778,14.9444,4.8333,12,7.7778,9.0556,6.3556,7.6444,2,12l4.3556,4.3556Z" style="fill:rgb(45,100,148)" />
                            </g>
                            <rect width="24" height="24" style="fill:none" />
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <div id="audioContainer" class="audioContainer">
            <div id="audioTopContainer" style="display: flex; justify-content: center; align-items: center;width: 100%; height: 100%; max-height: 80vh;">
                <svg id="muteIcon" class="groupActionButton" style="margin-right: 0.5rem; height: 33%; width: 33%;" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M0,0H24V24H0Z" style="fill:none" />
                    <path d="M18.5,12A4.5,4.5,0,0,0,16,7.97v8.05A4.474,4.474,0,0,0,18.5,12ZM5,9v6H9l5,5V4L9,9Z" style="fill: rgb(45,100,148)" />
                </svg>
            </div>

            <audio class="audioPlayerMain" id="audioPlayer" controls>
                <source type="audio/mpeg" id="audioP">
            </audio>
        </div>
    </div>

    <script>
        let videoPlayer = document.getElementById('videoPlayer');
        let videoP = document.getElementById('videoP');
        let coverPlayIcon = document.getElementById('coverPlayIcon');
        let coverPauseIcon = document.getElementById('coverPauseIcon');
        let playIcon = document.getElementById('playIcon');
        let pauseIcon = document.getElementById('pauseIcon');
        let volumeIcon = document.getElementById('volumeIcon');
        let currentTimeLabel = document.getElementById('currentTimeLabel');
        let wholeTimeLabel = document.getElementById('wholeTimeLabel');
        let muteIcon = document.getElementById('muteIcon');
        let muteVolumeLabel = document.getElementById('muteVolumeLabel');
        let volumeSlider = document.getElementById('volumeSlider');
        let skipForward = document.getElementById('skipForward');
        let skipBackward = document.getElementById('skipBackward');
        let controlButtonBar = document.getElementById('controlButtonBar');
        let progressBar = document.getElementById('progressBar');
        let progessBarLine = document.getElementById('progessBarLine');
        let progessBarBuffer = document.getElementById('progessBarBuffer')
        let coverPlayPause = document.getElementById('coverPlayPause');
        let audioPlayer = document.getElementById('audioPlayer');
        let videoContainer = document.getElementById('videoContainer')
        let audioContainer = document.getElementById('audioContainer')
        let soundIcon = document.getElementById('soundIcon')
        let audioTopContainer = document.getElementById('audioTopContainer');

        let isPlaying = false;
        let isDragging = false;
        let isMuted = false;
        let isAudio = false;
        let videoVolume = 0;
        let mouseTimeout;

        function togglePlayPause()
        {
            if (isAudio)
            {
                if (isPlaying)
                {
                    audioPlayer.pause();
                    isPlaying = false;
                    playIcon.style.display = 'inline-block';
                    coverPlayIcon.style.display = 'none';
                    pauseIcon.style.display = 'none';
                    coverPauseIcon.style.display = 'inline-block';
                    animateCoveredPlayPauseButton();
                }
                else
                {
                    audioPlayer.play();
                    isPlaying = true;
                    playIcon.style.display = 'none';
                    coverPlayIcon.style.display = 'inline-block';
                    pauseIcon.style.display = 'inline-block';
                    coverPauseIcon.style.display = 'none';
                    animateCoveredPlayPauseButton();
                }
            }
            else
            {
                if (videoPlayer.paused)
                {
                    videoPlayer.play();
                    isPlaying = true;
                    playIcon.style.display = 'none';
                    coverPlayIcon.style.display = 'inline-block';
                    pauseIcon.style.display = 'inline-block';
                    coverPauseIcon.style.display = 'none';
                    animateCoveredPlayPauseButton();
                }
                else
                {
                    videoPlayer.pause();
                    isPlaying = false;
                    playIcon.style.display = 'inline-block';
                    coverPlayIcon.style.display = 'none';
                    pauseIcon.style.display = 'none';
                    coverPauseIcon.style.display = 'inline-block';
                    animateCoveredPlayPauseButton();
                }
            }
        }

        function animateCoveredPlayPauseButton()
        {
            this.coverPlayPause.style.display = "block";

            setTimeout(() =>
            {
                this.coverPlayPause.style.display = "none";
            }, 2500)
        }

        function toggleMuteVideo()
        {
            if (isMuted)
            {
                isMuted = false;
                setVolume(videoVolume)
            }
            else
            {
                isMuted = true;
                setVolume(0);
            }
        }

        function setVolume(volume)
        {
            videoPlayer.volume = volume / 100;
            muteVolumeLabel.innerHTML = volume;
            volumeSlider.value = volume;

            if (volume > 0)
            {
                muteIcon.style.display = "none";
                soundIcon.style.display = "inline-block";
            }
            else
            {
                muteIcon.style.display = "inline-block";
                soundIcon.style.display = "none";
            }
        }

        function onVolumeChanged(event)
        {
            videoVolume = event.target.value;
            setVolume(event.target.value);
        }

        function skipVideo(seconds)
        {
            if (isAudio)
            {
                const currentTime = audioPlayer.currentTime;
                let newTime = currentTime + seconds;
                newTime = Math.max(0, Math.min(audioPlayer.duration, newTime));
                audioPlayer.currentTime = newTime;
                currentTimeLabel.innerHTML = currentTime;
            }
            else
            {
                const currentTime = videoPlayer.currentTime;
                let newTime = currentTime + seconds;
                newTime = Math.max(0, Math.min(videoPlayer.duration, newTime));
                videoPlayer.currentTime = newTime;
                currentTimeLabel.innerHTML = currentTime;
            }
        }

        function skipForwardFunc()
        {
            skipVideo(10)
        }

        function skipBackwardFunc()
        {
            skipVideo(-10)
        }

        function onMouseEnter()
        {
            controlButtonBar.style.display = "block";
        }

        function onMouseLeave()
        {
            controlButtonBar.style.display = "block";
        }

        function updateProgressBar()
        {
            const progressPercent = (videoPlayer.currentTime / videoPlayer.duration) * 100;
            currentTimeLabel.innerHTML = secondsToDisplayableTime(videoPlayer.currentTime);
            wholeTimeLabel.innerHTML = secondsToDisplayableTime(videoPlayer.duration);
            progessBarLine.style.width = `${progressPercent}%`;
            progessBarKnob.style.left = `${progressPercent}%`;
            progessBarBuffer.style.widows = Math.min(100, progressPercent + 5);
        }

        function setFullscreen(fullscreenState)
        {
            if (!document.fullscreenElement)
            {
                videoPlayer.requestFullscreen();
                videoPlayer.classList.add('fullscreen');
            }
            else
            {
                videoPlayer.exitFullscreen();
                videoPlayer.classList.remove('fullscreen');
            }
        }

        function setVideoSrc(videoURI)
        {
            isAudio = false;
            videoPlayer.src = videoURI;
            videoPlayer.load();
            audioContainer.style.display = 'none';
        }

        function setAudioSrc(videoURI)
        {
            isAudio = true;
            audioPlayer.src = videoURI;
            audioPlayer.load();
            videoContainer.style.display = 'none';
        }

        function seekVideo(event)
        {
            const progressBar = event.currentTarget;
            const rect = progressBar.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const percentage = (x / rect.width) * 100;
            videoPlayer.currentTime = (percentage * videoPlayer.duration) / 100;
        }

        function startDragging(event)
        {
            isDragging = true;
            dragProgress(event);
        }

        function dragProgress(event)
        {
            if (isDragging)
            {
                const progressBar = document.querySelector('.progress-bar-container');
                const rect = progressBar.getBoundingClientRect();
                const x = event.clientX - rect.left;
                let percentage = (x / rect.width) * 100;
                percentage = Math.max(0, Math.min(100, percentage));
                this.progress = percentage;
                videoPlayer.currentTime = (percentage * videoPlayer.duration) / 100;
            }
        }

        function stopDragging()
        {
            isDragging = false;
        }

        function hideMouse()
        {
            document.body.style.cursor = 'none';
        }

        function showMouse()
        {
            document.body.style.cursor = '';
        }

        function secondsToDisplayableTime(seconds)
        {
            var hours = Math.floor(seconds / 3600);
            var minutes = Math.floor((seconds % 3600) / 60);
            var restSeconds = Math.round(seconds % 60);

            var timeString = '';

            if (hours > 0)
            {
                timeString += hours + ':';
            }

            if (minutes < 10)
            {
                timeString += '0' + minutes;
            } else
            {
                timeString += minutes;
            }

            timeString += ':';

            if (restSeconds < 10)
            {
                timeString += '0' + restSeconds;
            } else
            {
                timeString += restSeconds;
            }

            return timeString;
        }

        document.addEventListener("DOMContentLoaded", function ()
        {
            videoPlayer = document.getElementById('videoPlayer');
            videoP = document.getElementById('videoP');
            playPauseIcon = document.getElementById('playPauseIcon');
            volumeIcon = document.getElementById('volumeIcon');
            currentTimeLabel = document.getElementById('currentTimeLabel');
            muteIcon = document.getElementById('muteIcon');
            wholeTimeLabel = document.getElementById('wholeTimeLabel');
            muteVolumeLabel = document.getElementById('muteVolumeLabel');
            volumeSlider = document.getElementById('volumeSlider');
            skipForward = document.getElementById('skipForward');
            skipBackward = document.getElementById('skipBackward');
            controlButtonBar = document.getElementById('controlButtonBar');
            progressBar = document.getElementById('progressBar')
            progessBarLine = document.getElementById('progessBarLine');
            progessBarBuffer = document.getElementById('progessBarBuffer')
            coverPlayPause = document.getElementById('coverPlayPause');
            playIcon = document.getElementById('playIcon');
            pauseIcon = document.getElementById('pauseIcon');
            coverPlayIcon = document.getElementById('coverPlayIcon');
            coverPauseIcon = document.getElementById('coverPauseIcon');
            audioPlayer = document.getElementById('audioPlayer');
            videoContainer = document.getElementById('videoContainer')
            audioContainer = document.getElementById('audioContainer')
            soundIcon = document.getElementById('soundIcon')
            audioTopContainer = document.getElementById('audioTopContainer');

            videoPlayer.addEventListener('timeupdate', updateProgressBar);
            videoPlayer.addEventListener('mouseenter', onMouseEnter);
            videoPlayer.addEventListener('mouseleave', onMouseLeave);
            videoPlayer.addEventListener('click', togglePlayPause);
            playIcon.addEventListener('click', togglePlayPause);
            coverPlayIcon.addEventListener('click', togglePlayPause);
            coverPauseIcon.addEventListener('click', togglePlayPause);
            audioTopContainer.addEventListener('click', togglePlayPause);

            pauseIcon.addEventListener('click', togglePlayPause);
            videoP.addEventListener('onclick', togglePlayPause)
            progressBar.addEventListener('mousedown', startDragging)
            progressBar.addEventListener('mousemove', dragProgress)
            progressBar.addEventListener('mouseleave', stopDragging)
            progressBar.addEventListener('mouseup', stopDragging)
            volumeIcon.addEventListener('click', setFullscreen);
            volumeSlider.addEventListener('change', onVolumeChanged)
            skipForward.addEventListener('click', skipForwardFunc)
            skipBackward.addEventListener('click', skipBackwardFunc)
            soundIcon.addEventListener('click', toggleMuteVideo);
            muteIcon.addEventListener('click', toggleMuteVideo);

            pauseIcon.style.display = 'none';
            coverPlayIcon.style.display = 'none';
            setVolume(25)

            document.addEventListener('fullscreenchange', function (event)
            {
                if (!document.fullscreenElement)
                    videoPlayer.classList.remove('fullscreen');
            });

            document.addEventListener('keydown', function (event)
            {
                switch (event.key)
                {
                    case ' ':
                        togglePlayPause();
                        break;
                    case 'ArrowRight':
                        skipVideo(10)
                        break;
                    case 'ArrowLeft':
                        skipVideo(-10);
                        break;
                }
            })

            document.addEventListener('mousemove', function ()
            {
                clearTimeout(mouseTimeout);
                showMouse();
                mouseTimeout = setTimeout(hideMouse, 3000);
            });

            videoPlayer.addEventListener('loadeddata', function ()
            {
                videoPlayer.play();
                isPlaying = true;
            });

            audioPlayer.addEventListener('loadeddata', function ()
            {
                audioPlayer.play();
                isPlaying = true;
            });
        })
    </script>
</body>
